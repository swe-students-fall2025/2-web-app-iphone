<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pet Adoption ‚Ä¢ Login</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style3.css') }}">
</head>
<body>
  <div class="login-container">
    <header class="login-header">
      <h1>üêæ Pet Adoption Login</h1>
      <p style="font-size:14px;color:#6b7280;margin-top:6px;">Sign in to manage pets, favorites, and messages.</p>
    </header>

    <form id="login-form" method="POST" action="/login" novalidate>
      <div class="input-group">
        <label for="username">Email or Username</label>
        <input type="text" id="username" name="username" placeholder="e.g., luna@adopt.me" required>
      </div>

      <div class="input-group">
        <label for="password">Password</label>
        <input type="password" id="password" name="password" placeholder="Enter your password" required>
      </div>

      <div class="login-btn-group" style="width:100%;margin-top:4px;">
        <button type="submit" class="login-btn">Login</button>
      </div>

      <div class="login-footer">
        <p>New here? <a href="/register">Create an account</a></p>
        <p style="margin-top:8px;"><a href="/search">Browse pets first</a></p>
      </div>

      <div id="login-error" class="error-message" style="display:none;"></div>
    </form>
  </div>

  <script>
    document.getElementById('login-form').addEventListener('submit', function (event) {
      event.preventDefault();
      const formData = new FormData(this);
      fetch('/login', { method: 'POST', body: formData })
        .then(res => res.json())
        .then(data => {
          if (data.success) {
            window.location.href = '/';
          } else {
            const el = document.getElementById('login-error');
            el.textContent = data.message || 'Invalid credentials.';
            el.style.display = 'block';
          }
        })
        .catch(() => {
          const el = document.getElementById('login-error');
          el.textContent = 'An error occurred during login.';
          el.style.display = 'block';
        });
    });
  </script>
</body>
</html>
